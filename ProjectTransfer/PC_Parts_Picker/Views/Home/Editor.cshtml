@model PC_Parts_Picker.Models.AdminViewModel
@{
    ViewData["Title"] = "Admin Panel";
}

@if (!(Model.IsAuthenticated))
{
    <!-- Password Entry Section -->
    <section class="password-section d-flex align-items-center justify-content-center min-vh-100">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6 col-lg-4">
                    <div class="cyber-card p-4 text-center">
                        <h2 class="text-cyan mb-4">Admin Access</h2>
                        <form method="post" asp-action="Editor">
                            <div class="mb-3">
                                <input type="password" name="password" class="form-control" placeholder="Enter admin password" required>
                            </div>
                            <button type="submit" name="action" value="login" class="btn btn-neon">Login</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
}
else
{
    <!-- Admin Panel Content -->
    <section class="admin-section py-4">
        <div class="container">
            <h1 class="text-center text-cyan mb-4">Admin Panel</h1>

            <!-- Navigation Tabs -->
            <ul class="nav nav-tabs cyber-tabs mb-4" id="adminTabs" role="tablist">
                <li class="nav-item">
                    <button class="nav-link active" id="cpus-tab" data-bs-toggle="tab" data-bs-target="#cpus" type="button">CPUs</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="motherboards-tab" data-bs-toggle="tab" data-bs-target="#motherboards" type="button">Motherboards</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="gpus-tab" data-bs-toggle="tab" data-bs-target="#gpus" type="button">GPUs</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="rams-tab" data-bs-toggle="tab" data-bs-target="#rams" type="button">RAM</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="ssds-tab" data-bs-toggle="tab" data-bs-target="#ssds" type="button">SSDs</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="psus-tab" data-bs-toggle="tab" data-bs-target="#psus" type="button">PSUs</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="cases-tab" data-bs-toggle="tab" data-bs-target="#cases" type="button">Cases</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="coolers-tab" data-bs-toggle="tab" data-bs-target="#coolers" type="button">Coolers</button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content cyber-content">
                <!-- CPUs Tab -->
                <div class="tab-pane fade show active" id="cpus" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="text-neon">CPUs</h3>
                        <button class="btn btn-neon" onclick="showAddModal('cpu')">
                            <i class="fas fa-plus"></i> Add CPU
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-dark table-striped cyber-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Brand</th>
                                    <th>Model</th>
                                    <th>Socket Type</th>
                                    <th>Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var cpu in Model.Cpus)
                                {
                                    <tr>
                                        <td>@cpu.Id</td>
                                        <td>@cpu.Brand</td>
                                        <td>@cpu.Model</td>
                                        <td>@cpu.SocketType</td>
                                        <td>@cpu.Price?.ToString("C")</td>
                                        <td>
                                            <button class="btn btn-sm btn-warning me-2" onclick="editItem('cpu', @cpu.Id)">Edit</button>
                                            <button class="btn btn-sm btn-danger" onclick="deleteItem('cpu', @cpu.Id)">Delete</button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Motherboards Tab -->
                <div class="tab-pane fade" id="motherboards" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="text-neon">Motherboards</h3>
                        <button class="btn btn-neon" onclick="showAddModal('motherboard')">
                            <i class="fas fa-plus"></i> Add Motherboard
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-dark table-striped cyber-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Brand</th>
                                    <th>Model</th>
                                    <th>Chipset</th>
                                    <th>Socket</th>
                                    <th>Form Factor</th>
                                    <th>Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var motherboard in Model.Motherboards)
                                {
                                    <tr>
                                        <td>@motherboard.Id</td>
                                        <td>@motherboard.Brand</td>
                                        <td>@motherboard.Model</td>
                                        <td>@motherboard.Chipset</td>
                                        <td>@motherboard.SocketType</td>
                                        <td>@motherboard.FormFactor</td>
                                        <td>@motherboard.Price?.ToString("C")</td>
                                        <td>
                                            <button class="btn btn-sm btn-warning me-2" onclick="editItem('motherboard', @motherboard.Id)">Edit</button>
                                            <button class="btn btn-sm btn-danger" onclick="deleteItem('motherboard', @motherboard.Id)">Delete</button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- GPUs Tab -->
                <div class="tab-pane fade" id="gpus" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="text-neon">GPUs</h3>
                        <button class="btn btn-neon" onclick="showAddModal('gpu')">
                            <i class="fas fa-plus"></i> Add GPU
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-dark table-striped cyber-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Brand</th>
                                    <th>Model</th>
                                    <th>Memory (GB)</th>
                                    <th>Power (W)</th>
                                    <th>Color</th>
                                    <th>Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var gpu in Model.Gpus)
                                {
                                    <tr>
                                        <td>@gpu.Id</td>
                                        <td>@gpu.Brand</td>
                                        <td>@gpu.Model</td>
                                        <td>@gpu.Memory</td>
                                        <td>@gpu.PowerConsumption</td>
                                        <td>@gpu.Color</td>
                                        <td>@gpu.Price?.ToString("C")</td>
                                        <td>
                                            <button class="btn btn-sm btn-warning me-2" onclick="editItem('gpu', @gpu.Id)">Edit</button>
                                            <button class="btn btn-sm btn-danger" onclick="deleteItem('gpu', @gpu.Id)">Delete</button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- RAM Tab -->
                <div class="tab-pane fade" id="rams" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="text-neon">RAM</h3>
                        <button class="btn btn-neon" onclick="showAddModal('ram')">
                            <i class="fas fa-plus"></i> Add RAM
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-dark table-striped cyber-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Model</th>
                                    <th>Size (GB)</th>
                                    <th>Type</th>
                                    <th>Color</th>
                                    <th>Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var ram in Model.Rams)
                                {
                                    <tr>
                                        <td>@ram.Id</td>
                                        <td>@ram.Model</td>
                                        <td>@ram.MemorySize</td>
                                        <td>@ram.MemoryType</td>
                                        <td>@ram.Color</td>
                                        <td>@ram.Price?.ToString("C")</td>
                                        <td>
                                            <button class="btn btn-sm btn-warning me-2" onclick="editItem('ram', @ram.Id)">Edit</button>
                                            <button class="btn btn-sm btn-danger" onclick="deleteItem('ram', @ram.Id)">Delete</button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- SSDs Tab -->
                <div class="tab-pane fade" id="ssds" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="text-neon">SSDs</h3>
                        <button class="btn btn-neon" onclick="showAddModal('ssd')">
                            <i class="fas fa-plus"></i> Add SSD
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-dark table-striped cyber-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Model</th>
                                    <th>Storage (GB)</th>
                                    <th>Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var ssd in Model.Ssds)
                                {
                                    <tr>
                                        <td>@ssd.Id</td>
                                        <td>@ssd.Model</td>
                                        <td>@ssd.Storage</td>
                                        <td>@ssd.Price?.ToString("C")</td>
                                        <td>
                                            <button class="btn btn-sm btn-warning me-2" onclick="editItem('ssd', @ssd.Id)">Edit</button>
                                            <button class="btn btn-sm btn-danger" onclick="deleteItem('ssd', @ssd.Id)">Delete</button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- PSUs Tab -->
                <div class="tab-pane fade" id="psus" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="text-neon">PSUs</h3>
                        <button class="btn btn-neon" onclick="showAddModal('psu')">
                            <i class="fas fa-plus"></i> Add PSU
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-dark table-striped cyber-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Model</th>
                                    <th>Wattage</th>
                                    <th>Rating</th>
                                    <th>Size</th>
                                    <th>Color</th>
                                    <th>Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var psu in Model.Psus)
                                {
                                    <tr>
                                        <td>@psu.Id</td>
                                        <td>@psu.Model</td>
                                        <td>@psu.Wattage</td>
                                        <td>@psu.Rating</td>
                                        <td>@psu.Size</td>
                                        <td>@psu.Color</td>
                                        <td>@psu.Price?.ToString("C")</td>
                                        <td>
                                            <button class="btn btn-sm btn-warning me-2" onclick="editItem('psu', @psu.Id)">Edit</button>
                                            <button class="btn btn-sm btn-danger" onclick="deleteItem('psu', @psu.Id)">Delete</button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Cases Tab -->
                <div class="tab-pane fade" id="cases" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="text-neon">Cases</h3>
                        <button class="btn btn-neon" onclick="showAddModal('case')">
                            <i class="fas fa-plus"></i> Add Case
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-dark table-striped cyber-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Model</th>
                                    <th>AIO Support</th>
                                    <th>Size</th>
                                    <th>Color</th>
                                    <th>Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var caseItem in Model.Cases)
                                {
                                    <tr>
                                        <td>@caseItem.Id</td>
                                        <td>@caseItem.Model</td>
                                        <td>@(caseItem.Aio ?? false ? "Yes" : "No")</td>
                                        <td>@caseItem.Size</td>
                                        <td>@caseItem.Color</td>
                                        <td>@caseItem.Price?.ToString("C")</td>
                                        <td>
                                            <button class="btn btn-sm btn-warning me-2" onclick="editItem('case', @caseItem.Id)">Edit</button>
                                            <button class="btn btn-sm btn-danger" onclick="deleteItem('case', @caseItem.Id)">Delete</button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Coolers Tab -->
                <div class="tab-pane fade" id="coolers" role="tabpanel">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h3 class="text-neon">Coolers</h3>
                        <button class="btn btn-neon" onclick="showAddModal('cooler')">
                            <i class="fas fa-plus"></i> Add Cooler
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-dark table-striped cyber-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Model</th>
                                    <th>AIO</th>
                                    <th>Mini-ITX Compatible</th>
                                    <th>Color</th>
                                    <th>Price</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var cooler in Model.Coolers)
                                {
                                    <tr>
                                        <td>@cooler.Id</td>
                                        <td>@cooler.Model</td>
                                        <td>@(cooler.Aio ?? false ? "Yes" : "No")</td>
                                        <td>@(cooler.MiniItxCompatibility ?? false ? "Yes" : "No")</td>
                                        <td>@cooler.Color</td>
                                        <td>@cooler.Price?.ToString("C")</td>
                                        <td>
                                            <button class="btn btn-sm btn-warning me-2" onclick="editItem('cooler', @cooler.Id)">Edit</button>
                                            <button class="btn btn-sm btn-danger" onclick="deleteItem('cooler', @cooler.Id)">Delete</button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Edit Modal -->
    <div class="modal fade" id="editModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title text-cyan">Edit Component</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editForm" method="post" asp-action="AdminPanel">
                        <input type="hidden" name="action" value="edit" />
                        <input type="hidden" id="editType" name="type" />
                        <input type="hidden" id="editId" name="id" />
                        <div id="editFields"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-neon" onclick="submitEdit()">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Modal -->
    <div class="modal fade" id="addModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title text-cyan">Add Component</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addForm" method="post" asp-action="AdminPanel">
                        <input type="hidden" name="action" value="add" />
                        <input type="hidden" id="addType" name="type" />
                        <div id="addFields"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-neon" onclick="submitAdd()">Add Component</button>
                </div>
            </div>
        </div>
    </div>
}

